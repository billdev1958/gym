<!DOCTYPE html>
<html th:replace="~{layouts/main :: layout(~{::title}, ~{::content})}">
<th:block th:fragment="title">Membresías</th:block>

<div th:fragment="content">

    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <div>
            <h1>Catálogo de Membresías</h1>
            <p style="color: #86868b;">Planes disponibles y precios.</p>
        </div>
    </div>

    <div style="border: 1px solid #d2d2d7; border-radius: 12px; overflow: hidden;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead style="background-color: #f5f5f7; border-bottom: 1px solid #d2d2d7;">
                <tr>
                    <th
                        style="padding: 15px; text-align: left; font-size: 12px; color: #86868b; text-transform: uppercase;">
                        Nombre</th>
                    <th
                        style="padding: 15px; text-align: left; font-size: 12px; color: #86868b; text-transform: uppercase;">
                        Descripción</th>
                    <th
                        style="padding: 15px; text-align: center; font-size: 12px; color: #86868b; text-transform: uppercase;">
                        Duración</th>
                    <th
                        style="padding: 15px; text-align: right; font-size: 12px; color: #86868b; text-transform: uppercase;">
                        Costo</th>
                    <th
                        style="padding: 15px; text-align: right; font-size: 12px; color: #86868b; text-transform: uppercase;">
                        Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="m : ${memberships}" style="border-bottom: 1px solid #f5f5f7;">

                    <td style="padding: 15px;">
                        <div style="font-weight: 600;" th:text="${m.name}">Gold</div>

                        <div th:if="${m.description != null and m.description.contains('+ descuento del')}"
                            style="font-size: 10px; background: #e5e5ea; color: #1d1d1f; display: inline-block; padding: 2px 6px; border-radius: 4px; margin-top: 4px;">

                            <span th:text="${#strings.substringAfter(m.description, '+ descuento del ')}">20%</span>
                            DESCUENTO
                        </div>
                    </td>

                    <td style="padding: 15px; font-size: 13px; color: #555; max-width: 300px;">
                        <span th:text="${m.description}">Acceso total...</span>
                    </td>

                    <td style="padding: 15px; text-align: center;">
                        <span style="font-family: monospace; font-size: 13px;" th:text="${m.durationDays + ' días'}">30
                            días</span>
                    </td>

                    <td style="padding: 15px; text-align: right; font-weight: 700;">
                        <span th:text="${'$' + m.cost}">$500.00</span>
                    </td>

                    <td style="padding: 15px; text-align: right;">
                        <a th:href="@{/memberships/edit/{id}(id=${m.id})}"
                            style="text-decoration: none; color: #0071e3; font-size: 14px;">
                            Editar
                        </a>
                    </td>
                </tr>

                <tr th:if="${memberships.empty}">
                    <td colspan="5" style="padding: 40px; text-align: center; color: #86868b;">
                        No hay membresías registradas.
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

</html>